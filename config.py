# config.py

# ==============================================================================
# 카메라 설정 (노트북 웹캠)
# ==============================================================================
# 노트북에 연결된 카메라 인덱스. 일반적으로 내장 웹캠은 0번입니다.
# 외장 USB 카메라가 있다면 1, 2 등으로 변경해야 할 수 있습니다.
CAMERA_INDEX = 0

# ==============================================================================
# YOLO 설정
# ==============================================================================
# YOLO 모델 경로 (첫 실행 시 자동으로 다운로드됨)
YOLO_MODEL_NAME = 'yolov5s' # 또는 'yolov5m', 'yolov5l', 'yolov5n' 등 (나노/미디움 등 모델 크기 조절)
CONFIDENCE_THRESHOLD = 0.5   # 객체 감지 신뢰도 임계값 (0.0~1.0, 높을수록 엄격)
IOU_THRESHOLD = 0.45         # Non-Max Suppression (NMS) 임계값 (겹치는 박스 제거 기준)

# ==============================================================================
# 넘어짐 감지 임계값 (영상 알고리즘: 바운딩 박스 가로/세로 비율 기반)
# ==============================================================================
# 1. 바운딩 박스 높이 - 폭 차이 임계값
#    - 사람이 서 있을 때: 보통 높이 > 폭 (높이 - 폭 > 0)
#    - 사람이 누워있을 때: 보통 폭 > 높이 (높이 - 폭 < 0)
#    - 이 값보다 (높이 - 폭)이 작으면 '넘어짐' 또는 '누워있음'으로 간주.
#    - 0.0이면 높이 < 폭 인 경우에만 감지. 약간의 여유를 주려면 음수 값을 사용 가능.
FALL_DIFFERENCE_THRESHOLD = 0 # 예시: 0 (높이가 폭보다 작아질 때 넘어짐으로 간주)

# 2. 사람이 감지되어야 할 최소 연속 프레임 수 (넘어짐 감지 안정화 및 오탐 감소)
#    - N프레임 연속으로 넘어짐 조건이 충족될 때만 최종 알림을 보냄.
#    - 높을수록 안정적이나, 감지 지연 시간이 늘어남. (3~10 프레임 권장)
FALL_MIN_CONSECUTIVE_FRAMES = 3 # 예시: 5

# ==============================================================================
# 기타 설정
# ==============================================================================
# 사람의 최소 높이 (너무 작은 객체가 사람으로 오인되는 것을 방지)
# 픽셀 단위. 바운딩 박스 높이가 이 값보다 작으면 사람으로 판단하지 않음.
MIN_PERSON_HEIGHT_PIXELS = 50

# 넘어짐 감지 후 카카오톡 메시지 전송 쿨타임 (초)
# 같은 넘어짐 이벤트에 대해 여러 번 알림이 가는 것을 방지.
FALL_COOLDOWN_SECONDS = 30 # 예시: 30초

# ==============================================================================
# 카카오톡 API 설정
# ==============================================================================
# Kakao Developers에서 발급받은 REST API 키 (YOUR_KAKAO_REST_API_KEY 부분을 실제 키로 변경하세요!)
KAKAO_REST_API_KEY = "706c0ebcd522d9dc43f9b18d5e4eb646" # <--- 실제 키로 변경 필수!

# Redirect URI: Kakao Developers에 등록한 Redirect URI와 동일해야 합니다.
# Flask 앱의 기본 주소 + /oauth 경로
KAKAO_REDIRECT_URI = "http://localhost:8080/oauth"

# 카카오톡 OAuth 토큰이 저장될 파일명
KAKAO_TOKEN_FILE = "kakao_tokens.json"

# ==============================================================================
# 웹 인터페이스 설정
# ==============================================================================
WEB_SERVER_PORT = 8080 # 이 포트가 이미 사용 중이라면, 5000, 8000 등으로 변경하세요.